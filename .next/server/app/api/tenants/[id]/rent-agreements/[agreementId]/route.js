(()=>{var e={};e.id=1663,e.ids=[1663],e.modules={5069:(e,t,r)=>{"use strict";r.d(t,{L:()=>l});var s=r(44994),a=r(82214),n=r(33873),i=r.n(n);let d=null,o=i().join(process.cwd(),"db.json"),u=new a.Pv(o),l=async()=>{if(!d){let e=new s.t(u,{tenants:[],flats:[],expenses:[],suppliers:[],tenantFields:[],expenseFields:[],supplierFields:[]});await e.read(),e.data=e.data||{tenants:[],flats:[],expenses:[],suppliers:[],tenantFields:[],expenseFields:[],supplierFields:[]},await e.write(),d=e}return d}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},44994:(e,t,r)=>{"use strict";r.d(t,{t:()=>s});class s{adapter;data;constructor(e,t){if(void 0===e)throw Error("lowdb: missing adapter");if(void 0===t)throw Error("lowdb: missing default data");this.adapter=e,this.data=t}async read(){let e=await this.adapter.read();e&&(this.data=e)}async write(){this.data&&await this.adapter.write(this.data)}async update(e){e(this.data),await this.write()}}},51455:e=>{"use strict";e.exports=require("node:fs/promises")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73024:e=>{"use strict";e.exports=require("node:fs")},73136:e=>{"use strict";e.exports=require("node:url")},76760:e=>{"use strict";e.exports=require("node:path")},78335:()=>{},82214:(e,t,r)=>{"use strict";r.d(t,{Pv:()=>l}),r(73024);var s=r(51455),a=r(76760),n=r(73136);async function i(e,t,r){for(let s=0;s<t;s++)try{return await e()}catch(e){if(s<t-1)await new Promise(e=>setTimeout(e,r));else throw e}}class d{#e;#t;#r=!1;#s=null;#a=null;#n=null;#i=null;#d(e){return this.#i=e,this.#n||=new Promise((e,t)=>{this.#a=[e,t]}),new Promise((e,t)=>{this.#n?.then(e).catch(t)})}async #o(e){this.#r=!0;try{await (0,s.writeFile)(this.#t,e,"utf-8"),await i(async()=>{await (0,s.rename)(this.#t,this.#e)},10,100),this.#s?.[0]()}catch(e){throw e instanceof Error&&this.#s?.[1](e),e}finally{if(this.#r=!1,this.#s=this.#a,this.#a=this.#n=null,null!==this.#i){let e=this.#i;this.#i=null,await this.write(e)}}}constructor(e){this.#e=e,this.#t=function(e){let t=e instanceof URL?(0,n.fileURLToPath)(e):e.toString();return(0,a.join)((0,a.dirname)(t),`.${(0,a.basename)(t)}.tmp`)}(e)}async write(e){return this.#r?this.#d(e):this.#o(e)}}class o{#e;#u;constructor(e){this.#e=e,this.#u=new d(e)}async read(){let e;try{e=await (0,s.readFile)(this.#e,"utf-8")}catch(e){if("ENOENT"===e.code)return null;throw e}return e}write(e){return this.#u.write(e)}}class u{#l;#p;#c;constructor(e,{parse:t,stringify:r}){this.#l=new o(e),this.#p=t,this.#c=r}async read(){let e=await this.#l.read();return null===e?null:this.#p(e)}write(e){return this.#l.write(this.#c(e))}}class l extends u{constructor(e){super(e,{parse:JSON.parse,stringify:e=>JSON.stringify(e,null,2)})}}},96487:()=>{},96559:(e,t,r)=>{"use strict";e.exports=r(44870)},96873:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>h,routeModule:()=>u,serverHooks:()=>c,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>p});var s={};r.r(s),r.d(s,{DELETE:()=>o});var a=r(96559),n=r(48088),i=r(37719),d=r(5069);async function o(e,{params:t}){let{id:r,agreementId:s}=await t,a=await (0,d.L)();await a.read();let n=a.data.tenants.findIndex(e=>e.id===r);if(-1===n)return new Response("Tenant not found",{status:404});let i=a.data.tenants[n].rentAgreements.length;return(a.data.tenants[n].rentAgreements=a.data.tenants[n].rentAgreements.filter(e=>e.id!==s),a.data.tenants[n].rentAgreements.length<i)?(await a.write(),new Response(null,{status:204})):new Response("Rent agreement not found",{status:404})}let u=new a.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/tenants/[id]/rent-agreements/[agreementId]/route",pathname:"/api/tenants/[id]/rent-agreements/[agreementId]",filename:"route",bundlePath:"app/api/tenants/[id]/rent-agreements/[agreementId]/route"},resolvedPagePath:"/Users/terdmann/Arbeitsbereich/Dev/tenant-manager/src/app/api/tenants/[id]/rent-agreements/[agreementId]/route.ts",nextConfigOutput:"standalone",userland:s}),{workAsyncStorage:l,workUnitAsyncStorage:p,serverHooks:c}=u;function h(){return(0,i.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:p})}}};var t=require("../../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[7719],()=>r(96873));module.exports=s})();