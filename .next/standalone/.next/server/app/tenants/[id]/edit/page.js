(()=>{var e={};e.id=8603,e.ids=[8603],e.modules={283:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var n=r(60687),a=r(43210),i=r(16189),s=r(89431),o=r(88931),l=r(87088),d=r(16184),c=r(49205),p=r(60997),h=r(98577),x=r(51067),u=r(86562),m=r(30076),g=r(76897),y=r(72132),A=r(91433),b=r(83685),j=r(43323);function v(){let{id:e}=(0,i.useParams)(),[t,r]=(0,a.useState)(null),[v,f]=(0,a.useState)({}),[C,S]=(0,a.useState)([]),[w,P]=(0,a.useState)(""),[z,D]=(0,a.useState)(""),[k,E]=(0,a.useState)(""),[I,$]=(0,a.useState)(""),[R,T]=(0,a.useState)(""),[N,W]=(0,a.useState)(!1),[q,_]=(0,a.useState)(""),[M,L]=(0,a.useState)(""),[O,B]=(0,a.useState)(!1),H=(0,i.useRouter)(),U=(0,a.useCallback)(async()=>{if(e){let t=await fetch(`/api/tenants/${e}`),n=await t.json();r(n),f(n.customFields||{});let a=await fetch("/api/admin/fields");S(await a.json())}},[e]),F=(e,t)=>{f(r=>({...r,[e]:t}))},G=async()=>{await fetch(`/api/tenants/${e}`,{method:"DELETE"}),H.push("/tenants")},J=async t=>{t.preventDefault(),await fetch(`/api/tenants/${e}/monthly-pay-history`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rent:parseFloat(w),heatingCost:parseFloat(z),additionalCost:parseFloat(k),startDate:I,endDate:R})}),P(""),D(""),E(""),$(""),T(""),W(!1),U()},X=async t=>{await fetch(`/api/tenants/${e}/monthly-pay-history/${t}`,{method:"DELETE"}),U()},V=async t=>{t.preventDefault(),await fetch(`/api/tenants/${e}/notes`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({note:q,date:M})}),_(""),L(""),B(!1),U()},K=async t=>{await fetch(`/api/tenants/${e}/notes/${t}`,{method:"DELETE"}),U()},Q=async r=>{r.preventDefault(),await fetch(`/api/tenants/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.name,customFields:v})}),H.push(`/tenants/${e}/edit`)},Y=e=>new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(e);return t?(0,n.jsxs)(s.A,{children:[(0,n.jsxs)(o.A,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",alignItems:"center",pb:3},children:[(0,n.jsxs)(o.A,{sx:{flex:1,minWidth:"288px"},children:[(0,n.jsx)(l.A,{variant:"h1",sx:{color:"primary.main"},children:"Tenant Details"}),(0,n.jsx)(l.A,{variant:"body2",sx:{color:"secondary.main"},children:"View and manage tenant information"})]}),(0,n.jsx)(d.A,{variant:"contained",color:"primary",onClick:()=>Q(new Event("submit")),children:"Save Changes"}),(0,n.jsx)(d.A,{variant:"contained",color:"secondary",onClick:G,sx:{ml:2},children:"Delete Tenant"})]}),(0,n.jsx)("form",{onSubmit:Q,id:"edit-tenant-form",children:(0,n.jsxs)(c.A,{container:!0,spacing:2,sx:{mb:2},children:[(0,n.jsx)(c.A,{size:12,children:(0,n.jsx)(p.A,{label:"Tenant Name",value:t.name,onChange:e=>r({...t,name:e.target.value}),fullWidth:!0,required:!0})}),C.map(e=>(0,n.jsx)(c.A,{size:{sm:12,md:"text"===e.type?12:4},children:(0,n.jsx)(p.A,{label:e.name,type:"number"===e.type||"currency"===e.type?"number":e.type,value:v[e.id]||"",onChange:t=>F(e.id,t.target.value),fullWidth:!0,rows:"text"===e.type?2:1,InputLabelProps:"date"===e.type?{shrink:!0}:{}})},e.id))]})}),(0,n.jsx)(l.A,{variant:"h2",sx:{color:"primary.main",pt:2,pb:1},children:"Contact Information"}),(0,n.jsxs)(o.A,{sx:{p:2,display:"grid",gridTemplateColumns:{xs:"1fr",sm:"20% 1fr"},gap:"1.5rem"},children:[(0,n.jsxs)(o.A,{sx:{gridColumn:{xs:"span 1",sm:"span 2"},borderTop:"1px solid",borderColor:"border.main",py:2},children:[(0,n.jsx)(l.A,{variant:"body2",sx:{color:"secondary.main"},children:"Phone"}),(0,n.jsx)(l.A,{variant:"body1",children:t.contact?.phone||"N/A"})]}),(0,n.jsxs)(o.A,{sx:{gridColumn:{xs:"span 1",sm:"span 2"},borderTop:"1px solid",borderColor:"border.main",py:2},children:[(0,n.jsx)(l.A,{variant:"body2",sx:{color:"secondary.main"},children:"Email"}),(0,n.jsx)(l.A,{variant:"body1",children:t.contact?.email||"N/A"})]}),(0,n.jsxs)(o.A,{sx:{gridColumn:{xs:"span 1",sm:"span 2"},borderTop:"1px solid",borderColor:"border.main",py:2},children:[(0,n.jsx)(l.A,{variant:"body2",sx:{color:"secondary.main"},children:"Address"}),(0,n.jsx)(l.A,{variant:"body1",children:t.contact?.address||"N/A"})]})]}),(0,n.jsx)(l.A,{variant:"h2",sx:{color:"primary.main",pt:2,pb:1},children:"Monthly Pay History"}),(0,n.jsx)(h.A,{component:x.A,sx:{border:"1px solid",borderColor:"border.main",borderRadius:"12px"},children:(0,n.jsxs)(u.A,{"aria-label":"monthly pay history table",children:[(0,n.jsx)(m.A,{children:(0,n.jsxs)(g.A,{children:[(0,n.jsx)(y.A,{sx:{width:"150px"},children:"Start Date"}),(0,n.jsx)(y.A,{sx:{width:"150px"},children:"End Date"}),(0,n.jsx)(y.A,{align:"right",children:"Rent"}),(0,n.jsx)(y.A,{align:"right",children:"Heating"}),(0,n.jsx)(y.A,{align:"right",children:"Additional"}),(0,n.jsx)(y.A,{align:"right",children:"Total"}),(0,n.jsx)(y.A,{sx:{width:"100px"}})]})}),(0,n.jsx)(A.A,{children:(t.monthlyPayHistory||[]).map(e=>(0,n.jsxs)(g.A,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,n.jsx)(y.A,{sx:{color:"secondary.main"},children:e.startDate}),(0,n.jsx)(y.A,{sx:{color:"secondary.main"},children:e.endDate||"Current"}),(0,n.jsx)(y.A,{align:"right",sx:{color:"secondary.main"},children:Y(e.rent)}),(0,n.jsx)(y.A,{align:"right",sx:{color:"secondary.main"},children:Y(e.heatingCost)}),(0,n.jsx)(y.A,{align:"right",sx:{color:"secondary.main"},children:Y(e.additionalCost)}),(0,n.jsx)(y.A,{align:"right",sx:{color:"primary.main",fontWeight:700},children:Y(e.rent+e.heatingCost+e.additionalCost)}),(0,n.jsx)(y.A,{align:"right",children:(0,n.jsx)(b.A,{edge:"end","aria-label":"delete",onClick:()=>X(e.id),children:(0,n.jsx)(j.A,{})})})]},e.id))})]})}),!N&&(0,n.jsx)(d.A,{variant:"outlined",onClick:()=>W(!0),sx:{mt:2},children:"Add Monthly Pay Entry"}),N&&(0,n.jsxs)("form",{onSubmit:J,children:[(0,n.jsxs)(c.A,{container:!0,spacing:2,sx:{mt:2},children:[(0,n.jsx)(c.A,{size:{sm:12,md:4},children:(0,n.jsx)(p.A,{label:"Rent Amount",value:w,onChange:e=>P(e.target.value),type:"number",fullWidth:!0,required:!0})}),(0,n.jsx)(c.A,{size:{sm:12,md:4},children:(0,n.jsx)(p.A,{label:"Heating Cost",value:z,onChange:e=>D(e.target.value),type:"number",fullWidth:!0,required:!0})}),(0,n.jsx)(c.A,{size:{sm:12,md:4},children:(0,n.jsx)(p.A,{label:"Additional Cost",value:k,onChange:e=>E(e.target.value),type:"number",fullWidth:!0,required:!0})}),(0,n.jsx)(c.A,{size:{sm:12,md:4},children:(0,n.jsx)(p.A,{label:"Start Date",value:I,onChange:e=>$(e.target.value),type:"date",fullWidth:!0,InputLabelProps:{shrink:!0},required:!0})}),(0,n.jsx)(c.A,{size:{sm:12,md:4},children:(0,n.jsx)(p.A,{label:"End Date",value:R,onChange:e=>T(e.target.value),type:"date",fullWidth:!0,InputLabelProps:{shrink:!0}})})]}),(0,n.jsxs)(o.A,{sx:{mt:2},children:[(0,n.jsx)(d.A,{type:"submit",variant:"contained",color:"primary",children:"Save Monthly Pay Entry"}),(0,n.jsx)(d.A,{variant:"outlined",onClick:()=>W(!1),sx:{ml:2},children:"Cancel"})]})]}),(0,n.jsx)(l.A,{variant:"h2",sx:{color:"primary.main",pt:2,pb:1},children:"Notes History"}),(0,n.jsx)(h.A,{component:x.A,sx:{border:"1px solid",borderColor:"border.main",borderRadius:"12px"},children:(0,n.jsxs)(u.A,{"aria-label":"notes history table",children:[(0,n.jsx)(m.A,{children:(0,n.jsxs)(g.A,{children:[(0,n.jsx)(y.A,{sx:{width:"150px"},children:"Date"}),(0,n.jsx)(y.A,{children:"Note"}),(0,n.jsx)(y.A,{sx:{width:"100px"}})]})}),(0,n.jsx)(A.A,{children:(t.notes||[]).map(e=>(0,n.jsxs)(g.A,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,n.jsx)(y.A,{sx:{color:"secondary.main"},children:e.date}),(0,n.jsx)(y.A,{sx:{color:"secondary.main"},children:e.note}),(0,n.jsx)(y.A,{align:"right",children:(0,n.jsx)(b.A,{edge:"end","aria-label":"delete",onClick:()=>K(e.id),children:(0,n.jsx)(j.A,{})})})]},e.id))})]})}),!O&&(0,n.jsx)(d.A,{variant:"outlined",onClick:()=>B(!0),sx:{mt:2},children:"Add Note"}),O&&(0,n.jsxs)("form",{onSubmit:V,children:[(0,n.jsxs)(c.A,{container:!0,spacing:2,sx:{mt:2},children:[(0,n.jsx)(c.A,{size:12,children:(0,n.jsx)(p.A,{label:"New Note",value:q,onChange:e=>_(e.target.value),fullWidth:!0,multiline:!0,rows:4,required:!0})}),(0,n.jsx)(c.A,{size:{sm:12,md:4},children:(0,n.jsx)(p.A,{label:"Note Date",value:M,onChange:e=>L(e.target.value),type:"date",fullWidth:!0,InputLabelProps:{shrink:!0},required:!0})})]}),(0,n.jsxs)(o.A,{sx:{mt:2},children:[(0,n.jsx)(d.A,{type:"submit",variant:"contained",color:"primary",children:"Save Note"}),(0,n.jsx)(d.A,{variant:"outlined",onClick:()=>B(!1),sx:{ml:2},children:"Cancel"})]})]})]}):(0,n.jsx)("p",{children:"Loading..."})}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13720:(e,t,r)=>{Promise.resolve().then(r.bind(r,79901))},14392:(e,t,r)=>{Promise.resolve().then(r.bind(r,283))},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},43323:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(23428),a=r(60687);let i=(0,n.A)((0,a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},67819:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>s.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>h,tree:()=>d});var n=r(65239),a=r(48088),i=r(88170),s=r.n(i),o=r(30893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d={children:["",{children:["tenants",{children:["[id]",{children:["edit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,79901)),"/Users/terdmann/Arbeitsbereich/Dev/tenant-manager/src/app/tenants/[id]/edit/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/Users/terdmann/Arbeitsbereich/Dev/tenant-manager/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["/Users/terdmann/Arbeitsbereich/Dev/tenant-manager/src/app/tenants/[id]/edit/page.tsx"],p={require:r,loadChunk:()=>Promise.resolve()},h=new n.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/tenants/[id]/edit/page",pathname:"/tenants/[id]/edit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},79901:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});let n=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/terdmann/Arbeitsbereich/Dev/tenant-manager/src/app/tenants/[id]/edit/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/terdmann/Arbeitsbereich/Dev/tenant-manager/src/app/tenants/[id]/edit/page.tsx","default")},83685:(e,t,r)=>{"use strict";r.d(t,{A:()=>C});var n=r(43210),a=r(49384),i=r(99282),s=r(2899),o=r(80931),l=r(13555),d=r(45258),c=r(48285),p=r(84754),h=r(37604),x=r(66803),u=r(61543),m=r(4144),g=r(82816);function y(e){return(0,g.Ay)("MuiIconButton",e)}let A=(0,m.A)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]);var b=r(60687);let j=e=>{let{classes:t,disabled:r,color:n,edge:a,size:s,loading:o}=e,l={root:["root",o&&"loading",r&&"disabled","default"!==n&&`color${(0,u.A)(n)}`,a&&`edge${(0,u.A)(a)}`,`size${(0,u.A)(s)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return(0,i.A)(l,y,t)},v=(0,l.Ay)(h.A,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,r.loading&&t.loading,"default"!==r.color&&t[`color${(0,u.A)(r.color)}`],r.edge&&t[`edge${(0,u.A)(r.edge)}`],t[`size${(0,u.A)(r.size)}`]]}})((0,d.A)(({theme:e})=>({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),variants:[{props:e=>!e.disableRipple,style:{"--IconButton-hoverBg":e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,s.X4)(e.palette.action.active,e.palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),(0,d.A)(({theme:e})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(e.palette).filter((0,c.A)()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette).filter((0,c.A)()).map(([t])=>({props:{color:t},style:{"--IconButton-hoverBg":e.vars?`rgba(${(e.vars||e).palette[t].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,s.X4)((e.vars||e).palette[t].main,e.palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:e.typography.pxToRem(28)}}],[`&.${A.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled},[`&.${A.loading}`]:{color:"transparent"}}))),f=(0,l.Ay)("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(e.vars||e).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),C=n.forwardRef(function(e,t){let r=(0,p.b)({props:e,name:"MuiIconButton"}),{edge:n=!1,children:i,className:s,color:l="default",disabled:d=!1,disableFocusRipple:c=!1,size:h="medium",id:u,loading:m=null,loadingIndicator:g,...y}=r,A=(0,o.A)(u),C=g??(0,b.jsx)(x.A,{"aria-labelledby":A,color:"inherit",size:16}),S={...r,edge:n,color:l,disabled:d,disableFocusRipple:c,loading:m,loadingIndicator:C,size:h},w=j(S);return(0,b.jsxs)(v,{id:m?A:u,className:(0,a.A)(w.root,s),centerRipple:!0,focusRipple:!c,disabled:d||m,ref:t,...y,ownerState:S,children:["boolean"==typeof m&&(0,b.jsx)("span",{className:w.loadingWrapper,style:{display:"contents"},children:(0,b.jsx)(f,{className:w.loadingIndicator,ownerState:S,children:m&&C})}),i]})})}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[7719,3664,9706,997,3112,5425,6161],()=>r(67819));module.exports=n})();