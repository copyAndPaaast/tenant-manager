(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{1515:(e,n,r)=>{Promise.resolve().then(r.bind(r,3792))},3792:(e,n,r)=>{"use strict";r.r(n),r.d(n,{default:()=>u});var i=r(5155),o=r(2115),t=r(6874),s=r.n(t),a=r(7217),x=r(4581),l=r(700),d=r(1218),c=r(4296),h=r(8407),p=r(7976),m=r(6033),f=r(404),y=r(4263),j=r(9776),A=r(8534);function u(){let[e,n]=(0,o.useState)([]),[r,t]=(0,o.useState)([]);(0,o.useEffect)(()=>{fetch("/api/expenses").then(e=>e.json()).then(e=>{n(e.filter(e=>"one_time"!==e.recurring))}),fetch("/api/tenants").then(e=>e.json()).then(e=>t(e))},[]);let u=e=>new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(e),g=e=>{if(!e.monthlyPayHistory||0===e.monthlyPayHistory.length)return 0;let n=[...e.monthlyPayHistory].sort((e,n)=>new Date(n.startDate).getTime()-new Date(e.startDate).getTime())[0];return n.rent+n.heatingCost+n.additionalCost},v=r.reduce((e,n)=>e+g(n),0),W=e.reduce((e,n)=>{var r,i;return e+((null==(i=n.amountHistory)||null==(r=i[n.amountHistory.length-1])?void 0:r.amount)||0)},0);return(0,i.jsxs)(a.A,{children:[(0,i.jsx)(x.A,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",gap:3,p:2},children:(0,i.jsx)(l.A,{variant:"h1",sx:{color:"primary.main",minWidth:"288px"},children:"Dashboard"})}),(0,i.jsxs)(x.A,{sx:{display:"flex",flexWrap:"wrap",gap:2,p:2},children:[(0,i.jsxs)(d.A,{sx:{flex:1,minWidth:"158px",p:3,display:"flex",flexDirection:"column",gap:1},children:[(0,i.jsx)(l.A,{variant:"body1",sx:{color:"primary.main",fontWeight:500},children:"Total Monthly Payments"}),(0,i.jsx)(l.A,{variant:"h2",sx:{color:"primary.main",fontWeight:700},children:u(v)})]}),(0,i.jsxs)(d.A,{sx:{flex:1,minWidth:"158px",p:3,display:"flex",flexDirection:"column",gap:1},children:[(0,i.jsx)(l.A,{variant:"body1",sx:{color:"primary.main",fontWeight:500},children:"Total Recurring Expenses"}),(0,i.jsx)(l.A,{variant:"h2",sx:{color:"primary.main",fontWeight:700},children:u(W)})]}),(0,i.jsxs)(d.A,{sx:{flex:1,minWidth:"158px",p:3,display:"flex",flexDirection:"column",gap:1},children:[(0,i.jsx)(l.A,{variant:"body1",sx:{color:"primary.main",fontWeight:500},children:"Monthly Surplus"}),(0,i.jsx)(l.A,{variant:"h2",sx:{color:"primary.main",fontWeight:700},children:u((v-W)/12)})]})]}),(0,i.jsx)(l.A,{variant:"h2",sx:{color:"primary.main",pt:2,pb:1,px:2},children:"Tenant Overview"}),(0,i.jsx)(x.A,{sx:{px:2,py:1},children:(0,i.jsx)(c.A,{component:h.A,sx:{borderRadius:"12px",border:"1px solid",borderColor:"divider",overflow:"hidden"},children:(0,i.jsxs)(p.A,{"aria-label":"tenant overview table",children:[(0,i.jsx)(m.A,{children:(0,i.jsxs)(f.A,{sx:{bgcolor:"background.default"},children:[(0,i.jsx)(y.A,{sx:{width:"400px",color:"primary.main",fontSize:"14px",fontWeight:500},children:"Tenant"}),(0,i.jsx)(y.A,{sx:{width:"400px",color:"primary.main",fontSize:"14px",fontWeight:500},children:"Unit"}),(0,i.jsx)(y.A,{sx:{width:"400px",color:"primary.main",fontSize:"14px",fontWeight:500},children:"Rent"}),(0,i.jsx)(y.A,{sx:{width:"240px",color:"secondary.main",fontSize:"14px",fontWeight:500}})]})}),(0,i.jsx)(j.A,{children:r.map(e=>(0,i.jsxs)(f.A,{sx:{borderTop:"1px solid",borderColor:"divider"},children:[(0,i.jsx)(y.A,{component:"th",scope:"row",sx:{color:"primary.main",fontSize:"14px",fontWeight:400},children:e.name}),(0,i.jsx)(y.A,{sx:{color:"secondary.main",fontSize:"14px",fontWeight:400},children:"Unit N/A"})," ",(0,i.jsx)(y.A,{sx:{color:"secondary.main",fontSize:"14px",fontWeight:400},children:u(g(e))}),(0,i.jsx)(y.A,{sx:{color:"secondary.main",fontSize:"14px",fontWeight:700},children:(0,i.jsx)(s(),{href:"/tenants/".concat(e.id,"/edit"),passHref:!0,children:(0,i.jsx)(A.A,{variant:"text",sx:{textTransform:"none",fontWeight:700,color:"secondary.main"},children:"View Details"})})})]},e.id))})]})})}),(0,i.jsx)(l.A,{variant:"h2",sx:{color:"primary.main",pt:2,pb:1,px:2},children:"Expense Overview"}),(0,i.jsx)(x.A,{sx:{px:2,py:1},children:(0,i.jsx)(c.A,{component:h.A,sx:{borderRadius:"12px",border:"1px solid",borderColor:"divider",overflow:"hidden"},children:(0,i.jsxs)(p.A,{"aria-label":"expense overview table",children:[(0,i.jsx)(m.A,{children:(0,i.jsxs)(f.A,{sx:{bgcolor:"background.default"},children:[(0,i.jsx)(y.A,{sx:{width:"400px",color:"primary.main",fontSize:"14px",fontWeight:500},children:"Expense"}),(0,i.jsx)(y.A,{sx:{width:"400px",color:"primary.main",fontSize:"14px",fontWeight:500},children:"How to Pay"}),(0,i.jsx)(y.A,{sx:{width:"400px",color:"primary.main",fontSize:"14px",fontWeight:500},children:"Amount"}),(0,i.jsx)(y.A,{sx:{width:"400px",color:"primary.main",fontSize:"14px",fontWeight:500},children:"Due Date"}),(0,i.jsx)(y.A,{sx:{width:"240px",color:"secondary.main",fontSize:"14px",fontWeight:500}})]})}),(0,i.jsx)(j.A,{children:e.map(e=>{var n,r;return(0,i.jsxs)(f.A,{sx:{borderTop:"1px solid",borderColor:"divider"},children:[(0,i.jsx)(y.A,{component:"th",scope:"row",sx:{color:"primary.main",fontSize:"14px",fontWeight:400},children:e.description}),(0,i.jsx)(y.A,{sx:{color:"secondary.main",fontSize:"14px",fontWeight:400},children:e.paymentMethod}),(0,i.jsx)(y.A,{sx:{color:"secondary.main",fontSize:"14px",fontWeight:400},children:u((null==(r=e.amountHistory)||null==(n=r[e.amountHistory.length-1])?void 0:n.amount)||0)}),(0,i.jsx)(y.A,{sx:{color:"secondary.main",fontSize:"14px",fontWeight:400},children:e.recurringDate||e.date}),(0,i.jsx)(y.A,{sx:{color:"secondary.main",fontSize:"14px",fontWeight:700},children:(0,i.jsx)(s(),{href:"/expenses/".concat(e.id,"/edit"),passHref:!0,children:(0,i.jsx)(A.A,{variant:"text",sx:{textTransform:"none",fontWeight:700,color:"secondary.main"},children:"View Details"})})})]},e.id)})})]})})})]})}}},e=>{var n=n=>e(e.s=n);e.O(0,[4475,6874,297,8892,8441,1684,7358],()=>n(1515)),_N_E=e.O()}]);