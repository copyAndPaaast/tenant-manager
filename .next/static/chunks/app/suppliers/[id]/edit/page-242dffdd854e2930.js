(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3719],{1191:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>D});var n=a(5155),i=a(2115),r=a(5695),s=a(7217),o=a(700),l=a(4581),c=a(8534),d=a(2110),p=a(3731),u=a(1218),h=a(2596),m=a(7472),v=a(5955),A=a(186),x=a(5170),y=a(870);function b(e){return(0,y.Ay)("MuiCardContent",e)}(0,x.A)("MuiCardContent",["root"]);let f=e=>{let{classes:t}=e;return(0,m.A)({root:["root"]},b,t)},g=(0,v.Ay)("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),j=i.forwardRef(function(e,t){let a=(0,A.b)({props:e,name:"MuiCardContent"}),{className:i,component:r="div",...s}=a,o={...a,component:r},l=f(o);return(0,n.jsx)(g,{as:r,className:(0,h.A)(l.root,i),ownerState:o,ref:t,...s})});var C=a(3148),S=a(9204),w=a(3127),k=a(5222),O=a(7088),M=a(7348),N=a(305),E=a(3970),T=a(9505);function D(){let{id:e}=(0,r.useParams)(),[t,a]=(0,i.useState)(""),[h,m]=(0,i.useState)(""),[v,A]=(0,i.useState)({}),[x,y]=(0,i.useState)([]),[b,f]=(0,i.useState)([]),[g,D]=(0,i.useState)("phone"),[I,z]=(0,i.useState)(""),[P,R]=(0,i.useState)([]),[L,W]=(0,i.useState)(""),[B,V]=(0,i.useState)(""),[_,H]=(0,i.useState)(!1),[q,X]=(0,i.useState)(!1),F=(0,r.useRouter)(),J=(0,i.useCallback)(async()=>{if(e){let t=await fetch("/api/suppliers/".concat(e)),n=await t.json();a(n.name),m(n.address||""),f(n.communicationChannels||[]),R(n.supplierNotes||[]),A(n.customFields||{});let i=await fetch("/api/admin/fields/suppliers");y(await i.json())}},[e]);(0,i.useEffect)(()=>{J()},[J]);let G=(e,t)=>{A(a=>({...a,[e]:t}))},U=async()=>{await fetch("/api/suppliers/".concat(e),{method:"DELETE"}),F.push("/suppliers")},K=async t=>{t.preventDefault(),await fetch("/api/suppliers/".concat(e,"/communication-channels"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:g,value:I})}),D("phone"),z(""),H(!1),J()},Q=async t=>{await fetch("/api/suppliers/".concat(e,"/communication-channels/").concat(t),{method:"DELETE"}),J()},Y=async t=>{t.preventDefault(),await fetch("/api/suppliers/".concat(e,"/notes"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({note:L,date:B})}),W(""),V(""),X(!1),J()},Z=async t=>{await fetch("/api/suppliers/".concat(e,"/notes/").concat(t),{method:"DELETE"}),J()},$=async a=>{a.preventDefault(),await fetch("/api/suppliers/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,address:h,customFields:v})}),F.push("/suppliers/".concat(e,"/edit"))};return(0,n.jsxs)(s.A,{children:[(0,n.jsx)(o.A,{variant:"h4",component:"h1",gutterBottom:!0,children:"Edit Supplier"}),(0,n.jsxs)(l.A,{sx:{mb:2},children:[(0,n.jsx)(c.A,{type:"submit",variant:"contained",color:"primary",form:"edit-supplier-form",children:"Save Changes"}),(0,n.jsx)(c.A,{variant:"contained",color:"secondary",onClick:U,sx:{ml:2},children:"Delete Supplier"})]}),(0,n.jsx)("form",{onSubmit:$,id:"edit-supplier-form",children:(0,n.jsxs)(d.A,{container:!0,spacing:2,sx:{mb:2},children:[(0,n.jsx)(d.A,{size:12,children:(0,n.jsx)(p.A,{label:"Supplier Name",value:t,onChange:e=>a(e.target.value),fullWidth:!0,required:!0})}),(0,n.jsx)(d.A,{size:{sm:12,md:8},children:(0,n.jsx)(p.A,{label:"Address",value:h,onChange:e=>m(e.target.value),fullWidth:!0,multiline:!0,rows:3})}),x.map(e=>(0,n.jsx)(d.A,{size:{sm:12,md:"text"===e.type?12:4},children:(0,n.jsx)(p.A,{label:e.name,type:"number"===e.type||"currency"===e.type?"number":e.type,value:v[e.id]||"",onChange:t=>G(e.id,t.target.value),fullWidth:!0,multiline:"text"===e.type,rows:"text"===e.type?2:1,InputLabelProps:"date"===e.type?{shrink:!0}:{}})},e.id))]})}),(0,n.jsx)(u.A,{sx:{mt:4,mb:2},children:(0,n.jsxs)(j,{children:[(0,n.jsx)(o.A,{variant:"h6",children:"Communication Channels"}),(0,n.jsx)(C.A,{dense:!0,children:(b||[]).map(e=>(0,n.jsx)(S.Ay,{secondaryAction:(0,n.jsx)(w.A,{edge:"end","aria-label":"delete",onClick:()=>Q(e.id),children:(0,n.jsx)(T.A,{})}),children:(0,n.jsx)(k.A,{primary:"".concat(e.type,": ").concat(e.value)})},e.id))}),!_&&(0,n.jsx)(c.A,{variant:"outlined",onClick:()=>H(!0),children:"Add Communication Channel"}),_&&(0,n.jsxs)("form",{onSubmit:K,children:[(0,n.jsxs)(d.A,{container:!0,spacing:2,children:[(0,n.jsx)(d.A,{size:{sm:12,md:4},children:(0,n.jsxs)(O.A,{fullWidth:!0,children:[(0,n.jsx)(M.A,{children:"Type"}),(0,n.jsxs)(N.A,{value:g,label:"Type",onChange:e=>D(e.target.value),children:[(0,n.jsx)(E.A,{value:"phone",children:"Phone"}),(0,n.jsx)(E.A,{value:"email",children:"Email"}),(0,n.jsx)(E.A,{value:"website",children:"Website"}),(0,n.jsx)(E.A,{value:"other",children:"Other"})]})]})}),(0,n.jsx)(d.A,{size:{sm:12,md:8},children:(0,n.jsx)(p.A,{label:"Value",value:I,onChange:e=>z(e.target.value),fullWidth:!0,required:!0})})]}),(0,n.jsxs)(l.A,{sx:{mt:2},children:[(0,n.jsx)(c.A,{type:"submit",variant:"contained",color:"primary",children:"Save Channel"}),(0,n.jsx)(c.A,{variant:"outlined",onClick:()=>H(!1),sx:{ml:2},children:"Cancel"})]})]})]})}),(0,n.jsx)(u.A,{sx:{mt:4,mb:2},children:(0,n.jsxs)(j,{children:[(0,n.jsx)(o.A,{variant:"h6",children:"Supplier Notes"}),(0,n.jsx)(C.A,{dense:!0,children:(P||[]).map(e=>(0,n.jsx)(S.Ay,{secondaryAction:(0,n.jsx)(w.A,{edge:"end","aria-label":"delete",onClick:()=>Z(e.id),children:(0,n.jsx)(T.A,{})}),children:(0,n.jsx)(k.A,{primary:e.note,secondary:"Date: ".concat(e.date)})},e.id))}),!q&&(0,n.jsx)(c.A,{variant:"outlined",onClick:()=>X(!0),children:"Add Note"}),q&&(0,n.jsxs)("form",{onSubmit:Y,children:[(0,n.jsxs)(d.A,{container:!0,spacing:2,children:[(0,n.jsx)(d.A,{size:12,children:(0,n.jsx)(p.A,{label:"New Note",value:L,onChange:e=>W(e.target.value),fullWidth:!0,multiline:!0,rows:4,required:!0})}),(0,n.jsx)(d.A,{size:{sm:12,md:4},children:(0,n.jsx)(p.A,{label:"Note Date",value:B,onChange:e=>V(e.target.value),type:"date",fullWidth:!0,InputLabelProps:{shrink:!0},required:!0})})]}),(0,n.jsxs)(l.A,{sx:{mt:2},children:[(0,n.jsx)(c.A,{type:"submit",variant:"contained",color:"primary",children:"Save Note"}),(0,n.jsx)(c.A,{variant:"outlined",onClick:()=>X(!1),sx:{ml:2},children:"Cancel"})]})]})]})})]})}},1218:(e,t,a)=>{"use strict";a.d(t,{A:()=>v});var n=a(2115),i=a(2596),r=a(7472),s=a(5955),o=a(186),l=a(8407),c=a(5170),d=a(870);function p(e){return(0,d.Ay)("MuiCard",e)}(0,c.A)("MuiCard",["root"]);var u=a(5155);let h=e=>{let{classes:t}=e;return(0,r.A)({root:["root"]},p,t)},m=(0,s.Ay)(l.A,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),v=n.forwardRef(function(e,t){let a=(0,o.b)({props:e,name:"MuiCard"}),{className:n,raised:r=!1,...s}=a,l={...a,raised:r},c=h(l);return(0,u.jsx)(m,{className:(0,i.A)(c.root,n),elevation:r?8:void 0,ref:t,ownerState:l,...s})})},3970:(e,t,a)=>{"use strict";a.d(t,{A:()=>w});var n=a(2115),i=a(2596),r=a(7472),s=a(4391),o=a(6437),l=a(5955),c=a(680),d=a(186),p=a(9801),u=a(4820),h=a(1329),m=a(6863),v=a(4324),A=a(5170);let x=(0,A.A)("MuiListItemIcon",["root","alignItemsFlexStart"]);var y=a(9546),b=a(870);function f(e){return(0,b.Ay)("MuiMenuItem",e)}let g=(0,A.A)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);var j=a(5155);let C=e=>{let{disabled:t,dense:a,divider:n,disableGutters:i,selected:s,classes:o}=e,l=(0,r.A)({root:["root",a&&"dense",t&&"disabled",!i&&"gutters",n&&"divider",s&&"selected"]},f,o);return{...o,...l}},S=(0,l.Ay)(u.A,{shouldForwardProp:e=>(0,o.A)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,a.dense&&t.dense,a.divider&&t.divider,!a.disableGutters&&t.gutters]}})((0,c.A)(e=>{let{theme:t}=e;return{...t.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(g.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,s.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),["&.".concat(g.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,s.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},["&.".concat(g.selected,":hover")]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,s.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,s.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}},["&.".concat(g.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(g.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity},["& + .".concat(v.A.root)]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},["& + .".concat(v.A.inset)]:{marginLeft:52},["& .".concat(y.A.root)]:{marginTop:0,marginBottom:0},["& .".concat(y.A.inset)]:{paddingLeft:36},["& .".concat(x.root)]:{minWidth:36},variants:[{props:e=>{let{ownerState:t}=e;return!t.disableGutters},style:{paddingLeft:16,paddingRight:16}},{props:e=>{let{ownerState:t}=e;return t.divider},style:{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"}},{props:e=>{let{ownerState:t}=e;return!t.dense},style:{[t.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:e=>{let{ownerState:t}=e;return t.dense},style:{minHeight:32,paddingTop:4,paddingBottom:4,...t.typography.body2,["& .".concat(x.root," svg")]:{fontSize:"1.25rem"}}}]}})),w=n.forwardRef(function(e,t){let a,r=(0,d.b)({props:e,name:"MuiMenuItem"}),{autoFocus:s=!1,component:o="li",dense:l=!1,divider:c=!1,disableGutters:u=!1,focusVisibleClassName:v,role:A="menuitem",tabIndex:x,className:y,...b}=r,f=n.useContext(p.A),g=n.useMemo(()=>({dense:l||f.dense||!1,disableGutters:u}),[f.dense,l,u]),w=n.useRef(null);(0,h.A)(()=>{s&&w.current&&w.current.focus()},[s]);let k={...r,dense:g.dense,divider:c,disableGutters:u},O=C(r),M=(0,m.A)(w,t);return r.disabled||(a=void 0!==x?x:-1),(0,j.jsx)(p.A.Provider,{value:g,children:(0,j.jsx)(S,{ref:M,role:A,tabIndex:a,component:o,focusVisibleClassName:(0,i.A)(O.focusVisible,v),className:(0,i.A)(O.root,y),...b,ownerState:k,classes:O})})})},6648:(e,t,a)=>{Promise.resolve().then(a.bind(a,1191))},9505:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var n=a(7515),i=a(5155);let r=(0,n.A)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")}},e=>{var t=t=>e(e.s=t);e.O(0,[4475,9008,3731,6780,9204,8855,8441,1684,7358],()=>t(6648)),_N_E=e.O()}]);